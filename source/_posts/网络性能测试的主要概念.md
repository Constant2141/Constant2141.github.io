---
title: 网络性能测试的主要概念
date: 2021-01-08 16:55:16
tags: [计网]
categories:
- 计算机
cover: https://cdn.jsdelivr.net/npm/dejavumoe@0.1.6/windows-terminal.webp
thumbnail: https://cdn.jsdelivr.net/npm/dejavumoe@0.1.6/windows-terminal.webp
toc: true
---

## 重要常见概念

### 并发量

系统**同时**能处理的请求数量,反应了系统的负载能力

### 吞吐量

**单位时间**内系统能处理的请求数量，体现系统处理请求的能力，这是目前**最常用**的性能测试指标

### 响应时间RT(Response-time)

响应时间是一个系统最重要的指标之一，它的数值大小直接反应了系统的快慢。响应时间是指执行一个请求从开始到最后收到响应数据所花费的总体时间,即从客户端发起请求到收到服务器响应结果的时间

### TPS(Transactions Per Second)

事物数/秒。它是软件测试结果的测量单位。一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数

> QPS基本类似于TPS，但是不同的是，对于一个页面的一次访问，形成一个TPS；但一次页面请求，可能产生多次对服务器的请求，服务器对这些请求，就可计入“QPS”之中
> 例：访问一个页面会请求服务器3次，一次放，产生一个“T”，产生3个“Q”



### QPS(Queries Per Second)

每秒查询率，是一台服务器每秒能够相应的查询次数，即1秒内完成的请求数量，是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准

#### QPS计算公式

QPS = 并发量 / 平均响应时间 = 某段时间内PV/这段时间秒数

单线程QPS=1000ms/RT 

多线程QPS= n * （1000ms/RT）

> 按照公式可见QPS随着线程的增加而线性增长，但是现实肯定不是线性增长的,毕竟服务器资源有限

#### QPS与RT关系

1.对于大部分web系统，响应时间一般由CPU执行时间，线程等待时间（IO等待，sleep, wait）时间组成。QPS和RT成反比关系

![img](1515293-20190621163227304-811436624.jpg)

2.在实际的测试环境中，QPS和RT并不是非常直接的反比关系

![img](1515293-20190621163235306-1914371029.jpg)

### 最佳线程数量

刚好消耗完服务器的瓶颈资源的临界线程数
公式：最佳线程数量=（（线程等待时间+线程cpu时间）/线程cpu时间）* cpu数量

特性：
1.在达到最佳线程数的时候，线程数量继续递增，则QPS不变，而响应时间变长，持续递增线程数量，则QPS开始下降
2.每个系统都有其最佳线程数量，但是不同状态下，最佳线程数量是会变化的
3.瓶颈资源可以是CPU,可以是内存，可以是锁资源，IO资源

## 其他概念

### bps

比特率，路单位，表示bit(比特)/second(秒)。在计算机网络或者是网络运营商中，一般，**宽带速率**的单位用bps(或b/s)表示；bps表示比特每秒即表示每秒钟传输多少位信息。

### pps

包转发率单位，表示包/秒，**交换机**每秒可以转发多少百万个数据包（Mpps），即交换机能同时转发的数据包的数量，表示交换机的交换能力。

### Bps

用户在网上**下载**时显示的速率单位，表示Byte(字节)/second(秒)