---
title: 预请求
date: 2019-09-16 21:59:13
tags: [Http]
categories: 
- 计算机
cover: https://picsum.photos/seed/20190916/500/300
thumbnail: https://picsum.photos/seed/20190916/500/300
toc: true
---
预请求的应用场景，原理，出现的前置条件。
<!-- more -->

### 应用场景
js发送一次ajax请求时,在浏览器那边却会查询到两次请求,第一次的Request Method参数是OPTIONS,还有一次就是我们真正的请求,比如get或是post请求方式

### 原理
这是浏览器对复杂跨域请求的一种处理方式,在真正发送请求之前,会先进行一次预请求,就是我们刚刚说到的参数为OPTIONS的第一次请求,他的作用是用于试探服务器响应是否正确,即是否能接受真正的请求,如果在options请求之后获取到的响应是拒绝性质的,例如500等http状态,那么它就会停止第二次的真正请求的访问
### 出现预请求的情况

致说明一下,有三种方式会导致这种现象:

1. 请求的方法不是GET/HEAD/POST
2. 请求虽然是POST，但是Content-Type的类型除了下面三种application/x-www-form-urlencoded, multipart/form-data, 或text/plain
3. 请求设置了自定义的header字段
4.  XMLHttpRequestUpload 对象注册了任何事件监听器
5. 请求中使用了ReadableStream对象





